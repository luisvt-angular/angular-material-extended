<h2 *ngIf="data.title" matDialogTitle>{{data.title}}</h2>
<form [formGroup]="form">
  <mat-dialog-content>
    <p *ngIf="data.message">{{data.message}}</p>
    <ng-template [ngIf]="data.inputs">
      <ng-template ngFor let-input [ngForOf]="data.inputs">
        <matx-input *ngIf="input.type === 'text' || input.type === 'number'"
                    [type]="input.type"
                    [label]="input.label"
                    [placeholder]="input.placeholder"
                    [formControlName]="input.name"
                    [required]="input.required"
                    [disabledControl]="input.disabled && input.disabled(form)">
          <matx-errors [field]="form.get(input.name)" [errorMessages]="input.errorMessages"></matx-errors>
        </matx-input>
        <matx-select *ngIf="input.type === 'select'"
                     [label]="input.label"
                     [placeholder]="input.placeholder"
                     [options]="input.options"
                     [displayWith]="input.displayWith"
                     [displayField]="input.displayField"
                     [noneText]="input.noneText"
                     [formControlName]="input.name"
                     [required]="input.required"
                     [disabledControl]="input.disabled && input.disabled(form)">
          <matx-errors [field]="form.get(input.name)" [errorMessages]="input.errorMessages"></matx-errors>
        </matx-select>
        <matx-autocomplete *ngIf="input.type === 'autocomplete'"
                           [label]="input.label"
                           [placeholder]="input.placeholder || input.label"
                           [options]="input.options"
                           [filterBy]="input.filterBy && input.filterBy(form)"
                           [displayField]="input.displayField"
                           [displayWith]="input.displayWith"
                           [formControlName]="input.name"
                           [required]="input.required"
                           [disabledControl]="input.disabled && input.disabled(form)"
                           (ngModelChange)="input.ngModelChange && input.ngModelChange($event, form)">
          <matx-errors [field]="form.get(input.name)" [errorMessages]="input.errorMessages"></matx-errors>
        </matx-autocomplete>
        <matx-datepicker *ngIf="input.type === 'date'"
                         [label]="input.label || input.placeholder"
                         [placeholder]="input.placeholder || input.label"
                         [formControlName]="input.name"
                         [required]="input.required"
                         [disabledControl]="input.disabled && input.disabled(form)"
                         (ngModelChange)="input.ngModelChange && input.ngModelChange($event, form)">
          <mat-error>
            <matx-errors [field]="form.get(input.name)" [errorMessages]="input.errorMessages"></matx-errors>
          </mat-error>
        </matx-datepicker>
      </ng-template>
    </ng-template>
  </mat-dialog-content>
  <mat-dialog-actions *ngIf="data.actions">
    <ng-template ngFor let-action [ngForOf]="data.actions">
      <!-- action as MatxPromptAction -->
      <button mat-raised-button [attr.type]="action.type || 'button'"
              (click)="execActionCb(action)"
              [color]="action.color"
              [disabled]="action._loading">
        <mat-spinner *ngIf="action._loading" diameter="24" style="display: inline-flex"></mat-spinner>
        {{getActionText(action)}}
      </button>
    </ng-template>
  </mat-dialog-actions>
</form>
